<div class="container">
  <div *ngIf="employee">
    <h2 class="my-4">Edit employee</h2>
    <form
      class="row g-3 needs-validation"
      [noValidate]="false"
      [formGroup]="employeeEditForm"
      (ngSubmit)="updateEmployee(employee.id)"
    >
      <div class="col-md-6">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['firstName'])"
          [id]="'firstName'"
          [label]="'First Name'"
          [placeholder]="'Johny Johny'"
        ></app-text-input>
      </div>
      <div class="col-md-6">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['lastName'])"
          [id]="'lastName'"
          [label]="'Last Name'"
          [placeholder]="'Yes Papa'"
        ></app-text-input>
      </div>
      <div class="col-md-6">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['dateOfBirth'])"
          [id]="'dateOfBirth'"
          [label]="'Birthday'"
          [type]="'date'"
        ></app-text-input>
      </div>
      <div class="col-md-6">
        <label for="gender" class="form-label fw-bold">Gender</label>
        <select class="form-select" id="gender" formControlName="gender">
          <option [ngValue]="null" disabled selected>--Gender--</option>
          <option *ngFor="let gender of genders" [ngValue]="gender.value">
            {{ gender.title }}
          </option>
        </select>
      </div>
      <div class="col-md-6">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['email'])"
          [id]="'email'"
          [label]="'Email'"
          [placeholder]="'company@abcsolutions.com'"
        ></app-text-input>
      </div>
      <div class="col-md-6">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['phoneNumber'])"
          [id]="'phoneNumber'"
          [label]="'Phone Number'"
          [placeholder]="'1234567890'"
        ></app-text-input>
      </div>
      <div class="col-md-4">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['address'])"
          [id]="'address'"
          [label]="'Address'"
          [placeholder]="'1234 Main St'"
        ></app-text-input>
      </div>
      <div class="col-md-4">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['city'])"
          [id]="'city'"
          [label]="'City'"
          [placeholder]="'Wall'"
        ></app-text-input>
      </div>
      <div class="col-md-4">
        <app-text-input
          [formControl]="$any(employeeEditForm.controls['country'])"
          [id]="'country'"
          [label]="'Country'"
          [placeholder]="'England'"
        ></app-text-input>
      </div>
      <div class="col-md-12">
        <label for="company" class="form-label fw-bold">Company</label>
        <select class="form-select" id="company" formControlName="companyId">
          <option [ngValue]="null" disabled selected>--Company--</option>
          <option
            *ngFor="let company of companies"
            [ngValue]="company.companyId"
          >
            {{ company.companyName }}
          </option>
        </select>
      </div>
      <div class="row mt-4">
        <div class="col-12">
          <button
            type="submit"
            class="btn btn-success"
            [disabled]="
              !(employeeEditForm.status === 'VALID' && employeeEditForm.dirty)
                ? true
                : false
            "
          >
            Save changes
          </button>
          <a
            [ngClass]="
              employeeEditForm.status === 'VALID' && employeeEditForm.dirty
                ? 'disabled'
                : ''
            "
            class="btn btn-danger ms-2"
            role="button"
            [routerLink]="['/employees', employee.id]"
            >Back to details</a
          >
        </div>
      </div>
    </form>
    <div class="col-12 mt-4">
      <div class="alert alert-warning pb-2" *ngIf="employeeEditForm.dirty">
        <p>
          <strong>Note: </strong>You have made changes. Any unsaved changes will
          be lost!
        </p>
      </div>
    </div>
  </div>
</div>
